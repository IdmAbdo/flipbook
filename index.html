<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Mon Livre</title>
  <style>
    body { margin: 0; background: #ccc; text-align: center; }
    #flipbook { width: 90vw; height: 90vh; margin: auto; }
    #flipbook canvas { width: 100%; height: 100%; }
  </style>
</head>
<body>
  <div id="flipbook"><p>Chargementâ€¦</p></div>
  <script src="libs/jquery.min.js"></script>
  <script src="libs/turn.min.js"></script>
  <script src="libs/pdf.js"></script>
  <script>
    const url = 'pdf/livre.pdf';
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'libs/pdf.worker.js';
    pdfjsLib.getDocument(url).promise.then(async pdf => {
      const pages = [];
      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const viewport = page.getViewport({ scale: 1.5 });
        const canvas = document.createElement("canvas");
        canvas.width = viewport.width;
        canvas.height = viewport.height;
        await page.render({ canvasContext: canvas.getContext("2d"), viewport }).promise;
        pages.push(canvas);
      }
      const flip = document.getElementById("flipbook");
      flip.innerHTML = "";
      pages.forEach(c => flip.appendChild(c));
      $('#flipbook').turn({ width: pages[0].width * 2, height: pages[0].height, autoCenter: true });
    });
  </script>
</body>
</html>
