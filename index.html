<!DOCTYPE html><html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Mon Livre PDF</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">  <style>
    body { margin: 0; padding: 0; background: #111; color: #fff; font-family: sans-serif; text-align: center; }
    h1 { margin: 1rem 0; }
    .nav { display: flex; justify-content: center; gap: 1rem; margin-bottom: 0.5rem; }
    button { padding: 0.8rem 1.2rem; background: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 1rem; }
    button:disabled { opacity: 0.5; cursor: default; }
    #flipbook-container { display: flex; justify-content: center; margin: 0 auto 2rem; max-width: 100%; overflow: hidden; }
    .flipbook { position: relative; margin: 0 auto; }
    .flipbook .page { width: 50%; height: 100%; }
    .flipbook .page img { display: block; width: 100%; height: auto; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.6); }
  </style></head>
<body>
  <h1>Mon Livre PDF</h1>
  <div class="nav">
    <button id="prev" disabled>&laquo; Précédent</button>
    <button id="next" disabled>Suivant &raquo;</button>
    <button id="fullscreen">Plein écran &#x26F6;</button>
  </div>
  <div id="flipbook-container">
    <div id="flipbook" class="flipbook"></div>
  </div>  <script src="libs/jquery.min.js"></script>  <script src="libs/turn.min.js"></script>  <script src="libs/pdf.min.js"></script>  <script src="libs/pdf.worker.js"></script>  <script>
  $(function(){
    // Configurer pdf.js
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'libs/pdf.worker.min.js';
    const url = 'pdf/livre.pdf';
    const $flip = $('#flipbook');
    const $prev = $('#prev');
    const $next = $('#next');
    const $fs   = $('#fullscreen');
    let pdfDoc = null, totalPages = 0;

    // Charger et rendre
    pdfjsLib.getDocument(url).promise.then(doc => {
      pdfDoc = doc; totalPages = doc.numPages;
      const renders = [];
      for(let i=1;i<=totalPages;i++){
        renders.push(
          doc.getPage(i).then(page => {
            const scale = 1.2;
            const vp = page.getViewport({scale});
            const cv = document.createElement('canvas');
            cv.width = vp.width; cv.height = vp.height;
            return page.render({canvasContext: cv.getContext('2d'), viewport: vp}).promise.then(()=>{
              const $p = $('<div/>',{class:'page'});
              $p.append($('<img/>').attr('src', cv.toDataURL()));
              $flip.append($p);
            });
          })
        );
      }
      return Promise.all(renders).then(initFlipbook);
    });

    // Init flipbook V1.0 + pliage
    function initFlipbook(){
      const w = Math.min(window.innerWidth*0.9, 800);
      const h = Math.round(w*0.7);
      $flip.css({width:w, height:h});
      $flip.turn({
        width: w,
        height: h,
        autoCenter: true,
        gradients: true,
        cornerSize: 100,
        elevation: 50,
        duration: 600,
        when: {
          turned: (e, page) => updateNav(page)
        }
      });
      $prev.prop('disabled', false);
      $next.prop('disabled', false);
      $flip.turn('page', 1);
      updateNav(1);
    }

    function updateNav(page){
      $prev.prop('disabled', page<=1);
      $next.prop('disabled', page>=totalPages);
    }

    $prev.click(()=> $flip.turn('previous'));
    $next.click(()=> $flip.turn('next'));
    $fs.click(()=>{
      const e = document.documentElement;
      !document.fullscreenElement? e.requestFullscreen?.() : document.exitFullscreen?.();
    });

    $(window).resize(()=>{
      if($flip.data('turn')){
        const w = Math.min(window.innerWidth*0.9,800);
        $flip.turn('size', w, Math.round(w*0.7));
      }
    });
  });
  </script></body>
</html>
