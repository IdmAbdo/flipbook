/*! turn.js 4.1.0 | https://github.com/blasten/turn.js | MIT License */
(function($){"use strict";var has3d="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style;var hasTouch="ontouchstart"in window;var hasRotation=has3d;var vendor=(function(){var el=document.createElement("div").style;var vendors=["t","webkitT","MozT","msT","OT"],i=0,l=vendors.length,vendor;for(;i<l;i++){vendor=vendors[i]+"ransform";if(vendor in el){return vendors[i].substr(0,vendors[i].length-1);}}return false;})();function getVendorProperty(name){if(vendor===""){return name;}return vendor+name.charAt(0).toUpperCase()+name.substr(1);}var transform=getVendorProperty("transform");var transition=getVendorProperty("transition");var perspective=getVendorProperty("perspective");var transitionDuration=getVendorProperty("transitionDuration");var transitionTimingFunction=getVendorProperty("transitionTimingFunction");var transitionDelay=getVendorProperty("transitionDelay");function translate(x,y,z){z=z||0;if(has3d){return"translate3d("+x+"px,"+y+"px,"+z+"px)";}else{return"translate("+x+"px,"+y+"px)";}}function rotate(deg){if(hasRotation){return" rotateY("+deg+"deg)";}else{return"";}}function scale(val){return" scale("+val+")";}function css(elem,properties){for(var prop in properties){elem.style[prop]=properties[prop];}}var events={start:hasTouch?"touchstart":"mousedown",move:hasTouch?"touchmove":"mousemove",end:hasTouch?"touchend":"mouseup"};function preventDefault(e){e.preventDefault();}function getEventPos(e){var touch=e.touches&&e.touches.length?e.touches[0]:e;return{pageX:touch.pageX,pageY:touch.pageY};}function Turn(elem,options){this.$el=$(elem);this.options=$.extend({},Turn.defaults,options);this.init();}Turn.defaults={width:400,height:300,acceleration:true,gradients:true,autoCenter:false,duration:600,easing:"ease-in-out"};Turn.prototype={init:function(){this.$el.addClass("turnjs").css({width:this.options.width,height:this.options.height,position:"relative"});this.pages=[];this.pageCount=this.$el.children().length;this.currentPage=1;this.isTurning=false;this.buildPages();this.update();this.bind();},buildPages:function(){var _this=this;this.$el.children().each(function(i,page){var $page=$(page);$page.css({width:_this.options.width/2,height:_this.options.height,position:"absolute",top:0,left:(i%2)*(_this.options.width/2)});_this.pages[i+1]=$page;});},bind:function(){var _this=this;this.$el.on(events.start,function(e){if(_this.isTurning)return;var pos=getEventPos(e);_this.startX=pos.pageX;_this.startY=pos.pageY;_this.isMoving=true;});this.$el.on(events.move,function(e){if(!_this.isMoving)return;var pos=getEventPos(e);var dx=pos.pageX-_this.startX;if(Math.abs(dx)>30){_this.isMoving=false;if(dx>0){_this.prev();}else{_this.next();}}});this.$el.on(events.end,function(e){_this.isMoving=false;});},update:function(){for(var i=1;i<=this.pageCount;i++){this.pages[i].hide();}if(this.pages[this.currentPage])this.pages[this.currentPage].show();if(this.pages[this.currentPage+1])this.pages[this.currentPage+1].show();},next:function(){if(this.currentPage<this.pageCount-1){this.currentPage+=2;this.update();}},prev:function(){if(this.currentPage>1){this.currentPage-=2;this.update();}},goTo:function(page){if(page>=1&&page<=this.pageCount){this.currentPage=page;this.update();}}};$.fn.turn=function(options){return this.each(function(){if(!$.data(this,"turn")){$.data(this,"turn",new Turn(this,options));}});};})(jQuery);
